<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LibPi2CSlave: src/bcm_low_level.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LibPi2CSlave
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">An I2C slave library for the Raspberry Pi</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">bcm_low_level.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;pthread.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;sys/stat.h&gt;</code><br />
<code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &lt;sys/mman.h&gt;</code><br />
<code>#include &quot;<a class="el" href="bcm__low__level_8h_source.html">bcm_low_level.h</a>&quot;</code><br />
</div>
<p><a href="bcm__low__level_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a369266c24eacffb87046522897a570d5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bcm__low__level_8c.html#a369266c24eacffb87046522897a570d5">_GNU_SOURCE</a></td></tr>
<tr class="separator:a369266c24eacffb87046522897a570d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ca040e00155c879465b24b6b7c79231"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bcm__low__level_8c.html#a0ca040e00155c879465b24b6b7c79231">WRITE_USLEEP_INTERVAL</a>&#160;&#160;&#160;(25)</td></tr>
<tr class="separator:a0ca040e00155c879465b24b6b7c79231"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa57287b668222d29e2718888f6fa2ac"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bcm__low__level_8c.html#afa57287b668222d29e2718888f6fa2ac">GET_FR_RXFLEVEL</a>()&#160;&#160;&#160;((bsc[<a class="el" href="bcm__low__level_8h.html#add226cdfd090709813cb6a60510cfdbd">BSC_FR</a>] &amp; <a class="el" href="bcm__low__level_8h.html#a13b7eb9099dfa3a1007121c0473e0b53">FR_RXFLEVEL</a>) &gt;&gt; <a class="el" href="bcm__low__level_8h.html#aaf2f674b57d4c889de9b5ab8e10a564d">FR_RXFLEVEL_OFF</a>)</td></tr>
<tr class="separator:afa57287b668222d29e2718888f6fa2ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75862429ab0606b9f212731239bf24f7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bcm__low__level_8c.html#a75862429ab0606b9f212731239bf24f7">GET_FR_TXFLEVEL</a>()&#160;&#160;&#160;((bsc[<a class="el" href="bcm__low__level_8h.html#add226cdfd090709813cb6a60510cfdbd">BSC_FR</a>] &amp; <a class="el" href="bcm__low__level_8h.html#a2fd344ce231805bd8c34a974d3a59e36">FR_TXFLEVEL</a>) &gt;&gt; <a class="el" href="bcm__low__level_8h.html#a32b0b8ab54fbb484c0885c329f1ea6d2">FR_TXFLEVEL_OFF</a>)</td></tr>
<tr class="separator:a75862429ab0606b9f212731239bf24f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a927deeba7e38147e13b08adee04fac46"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bcm__low__level_8c.html#a927deeba7e38147e13b08adee04fac46">RX_EMPTY</a>()&#160;&#160;&#160;(bsc[<a class="el" href="bcm__low__level_8h.html#add226cdfd090709813cb6a60510cfdbd">BSC_FR</a>] &amp; <a class="el" href="bcm__low__level_8h.html#a6cd58ffd494003583ff1f6e87f2af92b">FR_RXFE</a>)</td></tr>
<tr class="separator:a927deeba7e38147e13b08adee04fac46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6b915177d5b6616072633bede36606b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bcm__low__level_8c.html#ad6b915177d5b6616072633bede36606b">RX_BUSY</a>()&#160;&#160;&#160;(bsc[<a class="el" href="bcm__low__level_8h.html#add226cdfd090709813cb6a60510cfdbd">BSC_FR</a>] &amp; <a class="el" href="bcm__low__level_8h.html#ac0ae0f3207c1f1cfc603c7ccce0eaa82">FR_RXBUSY</a>)</td></tr>
<tr class="separator:ad6b915177d5b6616072633bede36606b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3bc50b8932e0b9a667857823db0af44"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bcm__low__level_8c.html#aa3bc50b8932e0b9a667857823db0af44">TX_BUSY</a>()&#160;&#160;&#160;(bsc[<a class="el" href="bcm__low__level_8h.html#add226cdfd090709813cb6a60510cfdbd">BSC_FR</a>] &amp; <a class="el" href="bcm__low__level_8h.html#ac0ae0f3207c1f1cfc603c7ccce0eaa82">FR_RXBUSY</a>)</td></tr>
<tr class="separator:aa3bc50b8932e0b9a667857823db0af44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc3d101f633a076cc1ca84b85b6224b2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bcm__low__level_8c.html#afc3d101f633a076cc1ca84b85b6224b2">TAG</a>&#160;&#160;&#160;&quot;pi2cslave&quot;</td></tr>
<tr class="separator:afc3d101f633a076cc1ca84b85b6224b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8c17160ad603adb1ab63f52cb1b27f62"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bcm__low__level_8c.html#a8c17160ad603adb1ab63f52cb1b27f62">init_bcm_reg_mem</a> ()</td></tr>
<tr class="memdesc:a8c17160ad603adb1ab63f52cb1b27f62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize /dev/mem to access hardware registers from userspace.  <a href="bcm__low__level_8c.html#a8c17160ad603adb1ab63f52cb1b27f62">More...</a><br /></td></tr>
<tr class="separator:a8c17160ad603adb1ab63f52cb1b27f62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae89ad1fd83f14b9d39b3cc4ebfb3b9f9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bcm__low__level_8c.html#ae89ad1fd83f14b9d39b3cc4ebfb3b9f9">shutdown_bcm_reg_mem</a> ()</td></tr>
<tr class="memdesc:ae89ad1fd83f14b9d39b3cc4ebfb3b9f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close the /dev/mem interface.  <a href="bcm__low__level_8c.html#ae89ad1fd83f14b9d39b3cc4ebfb3b9f9">More...</a><br /></td></tr>
<tr class="separator:ae89ad1fd83f14b9d39b3cc4ebfb3b9f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81128ba70208fa4b5ee98d48f7d48d56"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bcm__low__level_8c.html#a81128ba70208fa4b5ee98d48f7d48d56">init_bsc_i2c_slv</a> (uint8_t i2c_addr)</td></tr>
<tr class="memdesc:a81128ba70208fa4b5ee98d48f7d48d56"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the BCM BSC I2C slave device.  <a href="bcm__low__level_8c.html#a81128ba70208fa4b5ee98d48f7d48d56">More...</a><br /></td></tr>
<tr class="separator:a81128ba70208fa4b5ee98d48f7d48d56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2078db0e721d7d78f7fe8cd7b6e263a4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bcm__low__level_8c.html#a2078db0e721d7d78f7fe8cd7b6e263a4">bcm_set_gpio_out</a> (int gpio, enum <a class="el" href="bcm__low__level_8h.html#af30f88e9c2013d34af7e6aff565a238c">gpio_state</a> state)</td></tr>
<tr class="memdesc:a2078db0e721d7d78f7fe8cd7b6e263a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the output state of a GPIO.  <a href="bcm__low__level_8c.html#a2078db0e721d7d78f7fe8cd7b6e263a4">More...</a><br /></td></tr>
<tr class="separator:a2078db0e721d7d78f7fe8cd7b6e263a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1130f30a3f47df0c80f45dceb01945f1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bcm__low__level_8c.html#a1130f30a3f47df0c80f45dceb01945f1">shutdown_bsc_i2c_slv</a> ()</td></tr>
<tr class="memdesc:a1130f30a3f47df0c80f45dceb01945f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deinitialize the BSC I2C slave device.  <a href="bcm__low__level_8c.html#a1130f30a3f47df0c80f45dceb01945f1">More...</a><br /></td></tr>
<tr class="separator:a1130f30a3f47df0c80f45dceb01945f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8cb8bf9a5c86671efa75a33425e3029"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bcm__low__level_8c.html#ab8cb8bf9a5c86671efa75a33425e3029">bsc_i2c_receiving</a> ()</td></tr>
<tr class="memdesc:ab8cb8bf9a5c86671efa75a33425e3029"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if master is currently sending us data.  <a href="bcm__low__level_8c.html#ab8cb8bf9a5c86671efa75a33425e3029">More...</a><br /></td></tr>
<tr class="separator:ab8cb8bf9a5c86671efa75a33425e3029"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22e8b589d9a40554e91bcbf569fe1862"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bcm__low__level_8c.html#a22e8b589d9a40554e91bcbf569fe1862">bsc_i2c_read_poll</a> (uint8_t *buf, size_t len)</td></tr>
<tr class="memdesc:a22e8b589d9a40554e91bcbf569fe1862"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read up to len bytes into buffer. Does not block.  <a href="bcm__low__level_8c.html#a22e8b589d9a40554e91bcbf569fe1862">More...</a><br /></td></tr>
<tr class="separator:a22e8b589d9a40554e91bcbf569fe1862"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39202bfcd28bdbf0d635fad0026bf8dc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bcm__low__level_8c.html#a39202bfcd28bdbf0d635fad0026bf8dc">bsc_i2c_write</a> (<a class="el" href="bcm__low__level_8h.html#a1f61714a194226470d0f25084e10a6b0">tx_callback</a> cb, uint16_t addr)</td></tr>
<tr class="memdesc:a39202bfcd28bdbf0d635fad0026bf8dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send bytes to master from tx_callback, incrementing addr each time.  <a href="bcm__low__level_8c.html#a39202bfcd28bdbf0d635fad0026bf8dc">More...</a><br /></td></tr>
<tr class="separator:a39202bfcd28bdbf0d635fad0026bf8dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a369266c24eacffb87046522897a570d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a369266c24eacffb87046522897a570d5">&#9670;&nbsp;</a></span>_GNU_SOURCE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _GNU_SOURCE</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bcm__low__level_8c_source.html#l00012">12</a> of file <a class="el" href="bcm__low__level_8c_source.html">bcm_low_level.c</a>.</p>

</div>
</div>
<a id="afa57287b668222d29e2718888f6fa2ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa57287b668222d29e2718888f6fa2ac">&#9670;&nbsp;</a></span>GET_FR_RXFLEVEL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GET_FR_RXFLEVEL</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;((bsc[<a class="el" href="bcm__low__level_8h.html#add226cdfd090709813cb6a60510cfdbd">BSC_FR</a>] &amp; <a class="el" href="bcm__low__level_8h.html#a13b7eb9099dfa3a1007121c0473e0b53">FR_RXFLEVEL</a>) &gt;&gt; <a class="el" href="bcm__low__level_8h.html#aaf2f674b57d4c889de9b5ab8e10a564d">FR_RXFLEVEL_OFF</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bcm__low__level_8c_source.html#l00030">30</a> of file <a class="el" href="bcm__low__level_8c_source.html">bcm_low_level.c</a>.</p>

</div>
</div>
<a id="a75862429ab0606b9f212731239bf24f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75862429ab0606b9f212731239bf24f7">&#9670;&nbsp;</a></span>GET_FR_TXFLEVEL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GET_FR_TXFLEVEL</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;((bsc[<a class="el" href="bcm__low__level_8h.html#add226cdfd090709813cb6a60510cfdbd">BSC_FR</a>] &amp; <a class="el" href="bcm__low__level_8h.html#a2fd344ce231805bd8c34a974d3a59e36">FR_TXFLEVEL</a>) &gt;&gt; <a class="el" href="bcm__low__level_8h.html#a32b0b8ab54fbb484c0885c329f1ea6d2">FR_TXFLEVEL_OFF</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bcm__low__level_8c_source.html#l00031">31</a> of file <a class="el" href="bcm__low__level_8c_source.html">bcm_low_level.c</a>.</p>

</div>
</div>
<a id="ad6b915177d5b6616072633bede36606b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6b915177d5b6616072633bede36606b">&#9670;&nbsp;</a></span>RX_BUSY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RX_BUSY</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;(bsc[<a class="el" href="bcm__low__level_8h.html#add226cdfd090709813cb6a60510cfdbd">BSC_FR</a>] &amp; <a class="el" href="bcm__low__level_8h.html#ac0ae0f3207c1f1cfc603c7ccce0eaa82">FR_RXBUSY</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bcm__low__level_8c_source.html#l00033">33</a> of file <a class="el" href="bcm__low__level_8c_source.html">bcm_low_level.c</a>.</p>

</div>
</div>
<a id="a927deeba7e38147e13b08adee04fac46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a927deeba7e38147e13b08adee04fac46">&#9670;&nbsp;</a></span>RX_EMPTY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RX_EMPTY</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;(bsc[<a class="el" href="bcm__low__level_8h.html#add226cdfd090709813cb6a60510cfdbd">BSC_FR</a>] &amp; <a class="el" href="bcm__low__level_8h.html#a6cd58ffd494003583ff1f6e87f2af92b">FR_RXFE</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bcm__low__level_8c_source.html#l00032">32</a> of file <a class="el" href="bcm__low__level_8c_source.html">bcm_low_level.c</a>.</p>

</div>
</div>
<a id="afc3d101f633a076cc1ca84b85b6224b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc3d101f633a076cc1ca84b85b6224b2">&#9670;&nbsp;</a></span>TAG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TAG&#160;&#160;&#160;&quot;pi2cslave&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bcm__low__level_8c_source.html#l00036">36</a> of file <a class="el" href="bcm__low__level_8c_source.html">bcm_low_level.c</a>.</p>

</div>
</div>
<a id="aa3bc50b8932e0b9a667857823db0af44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3bc50b8932e0b9a667857823db0af44">&#9670;&nbsp;</a></span>TX_BUSY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TX_BUSY</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;(bsc[<a class="el" href="bcm__low__level_8h.html#add226cdfd090709813cb6a60510cfdbd">BSC_FR</a>] &amp; <a class="el" href="bcm__low__level_8h.html#ac0ae0f3207c1f1cfc603c7ccce0eaa82">FR_RXBUSY</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bcm__low__level_8c_source.html#l00034">34</a> of file <a class="el" href="bcm__low__level_8c_source.html">bcm_low_level.c</a>.</p>

</div>
</div>
<a id="a0ca040e00155c879465b24b6b7c79231"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ca040e00155c879465b24b6b7c79231">&#9670;&nbsp;</a></span>WRITE_USLEEP_INTERVAL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WRITE_USLEEP_INTERVAL&#160;&#160;&#160;(25)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bcm__low__level_8c_source.html#l00029">29</a> of file <a class="el" href="bcm__low__level_8c_source.html">bcm_low_level.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a2078db0e721d7d78f7fe8cd7b6e263a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2078db0e721d7d78f7fe8cd7b6e263a4">&#9670;&nbsp;</a></span>bcm_set_gpio_out()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool bcm_set_gpio_out </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>gpio</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="bcm__low__level_8h.html#af30f88e9c2013d34af7e6aff565a238c">gpio_state</a>&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the output state of a GPIO. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gpio</td><td>Number of GPIO to set </td></tr>
    <tr><td class="paramname">state</td><td>One of gpio_state</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>false on error, true otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="bcm__low__level_8c_source.html#l00116">116</a> of file <a class="el" href="bcm__low__level_8c_source.html">bcm_low_level.c</a>.</p>

</div>
</div>
<a id="a22e8b589d9a40554e91bcbf569fe1862"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22e8b589d9a40554e91bcbf569fe1862">&#9670;&nbsp;</a></span>bsc_i2c_read_poll()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bsc_i2c_read_poll </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read up to len bytes into buffer. Does not block. </p>
<p>If there is no data to read from the master, return immediately.</p>
<dl class="section note"><dt>Note</dt><dd>This function is a pthread cancellation point</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>Buffer to read bytes into </td></tr>
    <tr><td class="paramname">len</td><td>Length of bufer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of bytes read </dd></dl>

<p class="definition">Definition at line <a class="el" href="bcm__low__level_8c_source.html#l00156">156</a> of file <a class="el" href="bcm__low__level_8c_source.html">bcm_low_level.c</a>.</p>

</div>
</div>
<a id="ab8cb8bf9a5c86671efa75a33425e3029"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8cb8bf9a5c86671efa75a33425e3029">&#9670;&nbsp;</a></span>bsc_i2c_receiving()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool bsc_i2c_receiving </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if master is currently sending us data. </p>
<dl class="section return"><dt>Returns</dt><dd>True as long as the master is sending us data, else false </dd></dl>

<p class="definition">Definition at line <a class="el" href="bcm__low__level_8c_source.html#l00152">152</a> of file <a class="el" href="bcm__low__level_8c_source.html">bcm_low_level.c</a>.</p>

</div>
</div>
<a id="a39202bfcd28bdbf0d635fad0026bf8dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39202bfcd28bdbf0d635fad0026bf8dc">&#9670;&nbsp;</a></span>bsc_i2c_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bsc_i2c_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="bcm__low__level_8h.html#a1f61714a194226470d0f25084e10a6b0">tx_callback</a>&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>addr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send bytes to master from tx_callback, incrementing addr each time. </p>
<p>Continues trying to send data until the master sends us data. When the master starts sending us data, again, unsent data is cleared from the TX FIFO.</p>
<dl class="section note"><dt>Note</dt><dd>Having the callback called, does not mean that the data has been sent to the master. It only means that it has been queued. The return value must be checked to see how many bytes have been sent.</dd>
<dd>
This function is a pthread cancellation point</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cb</td><td>The callback to retrieve data to send. If this returns false, no more data is sent (but the function does not return). </td></tr>
    <tr><td class="paramname">addr</td><td>This is passed to the callback to indicate the byte to send</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of bytes sent. </dd></dl>

<p class="definition">Definition at line <a class="el" href="bcm__low__level_8c_source.html#l00183">183</a> of file <a class="el" href="bcm__low__level_8c_source.html">bcm_low_level.c</a>.</p>

</div>
</div>
<a id="a8c17160ad603adb1ab63f52cb1b27f62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c17160ad603adb1ab63f52cb1b27f62">&#9670;&nbsp;</a></span>init_bcm_reg_mem()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool init_bcm_reg_mem </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize /dev/mem to access hardware registers from userspace. </p>
<dl class="section warning"><dt>Warning</dt><dd>This function must be called before any other function in this module.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>false on error, true otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="bcm__low__level_8c_source.html#l00043">43</a> of file <a class="el" href="bcm__low__level_8c_source.html">bcm_low_level.c</a>.</p>

</div>
</div>
<a id="a81128ba70208fa4b5ee98d48f7d48d56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81128ba70208fa4b5ee98d48f7d48d56">&#9670;&nbsp;</a></span>init_bsc_i2c_slv()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool init_bsc_i2c_slv </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>i2c_addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the BCM BSC I2C slave device. </p>
<dl class="section warning"><dt>Warning</dt><dd>This must be called after <a class="el" href="bcm__low__level_8h.html#a8c17160ad603adb1ab63f52cb1b27f62" title="Initialize /dev/mem to access hardware registers from userspace.">init_bcm_reg_mem()</a>; </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i2c_addr</td><td>Address for BCM I2C slave</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>false on error, true otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="bcm__low__level_8c_source.html#l00093">93</a> of file <a class="el" href="bcm__low__level_8c_source.html">bcm_low_level.c</a>.</p>

</div>
</div>
<a id="ae89ad1fd83f14b9d39b3cc4ebfb3b9f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae89ad1fd83f14b9d39b3cc4ebfb3b9f9">&#9670;&nbsp;</a></span>shutdown_bcm_reg_mem()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void shutdown_bcm_reg_mem </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close the /dev/mem interface. </p>
<dl class="section warning"><dt>Warning</dt><dd>This must be called after <a class="el" href="bcm__low__level_8h.html#a1130f30a3f47df0c80f45dceb01945f1" title="Deinitialize the BSC I2C slave device.">shutdown_bsc_i2c_slv()</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="bcm__low__level_8c_source.html#l00068">68</a> of file <a class="el" href="bcm__low__level_8c_source.html">bcm_low_level.c</a>.</p>

</div>
</div>
<a id="a1130f30a3f47df0c80f45dceb01945f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1130f30a3f47df0c80f45dceb01945f1">&#9670;&nbsp;</a></span>shutdown_bsc_i2c_slv()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void shutdown_bsc_i2c_slv </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deinitialize the BSC I2C slave device. </p>

<p class="definition">Definition at line <a class="el" href="bcm__low__level_8c_source.html#l00147">147</a> of file <a class="el" href="bcm__low__level_8c_source.html">bcm_low_level.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
